<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <!-- 로그인 폼 (로그인 전에만 표시) -->
    <div id="login-container" style="display: none;">
        <div class="login-wrapper">
            <div id="form-ui">
                <form action="#" method="post" id="login-form">
                    <div id="form-body">
                        <div id="welcome-lines">
                            <div id="welcome-line-1">Marryday</div>
                            <div id="welcome-line-2">Admin Login</div>
                        </div>
                        <div id="input-area">
                            <div class="form-inp">
                                <input placeholder="Email Address" type="email" id="email" name="email" required
                                    autocomplete="email">
                            </div>
                            <div class="form-inp">
                                <input placeholder="Password" type="password" id="password" name="password" required
                                    autocomplete="current-password">
                            </div>
                        </div>
                        <div id="submit-button-cvr">
                            <button id="submit-button" type="submit">Login</button>
                        </div>
                        <div id="login-error" class="error-message" style="display: none;"></div>
                        <div id="bar"></div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 관리자 메뉴 (로그인 후에만 표시) -->
    <div id="admin-container" style="display: none;">
        <header class="admin-header">
            <div class="admin-header-content">
                <h1>Admin</h1>
                <span class="admin-subtitle">관리자용 페이지 입니다</span>
                <div class="admin-header-right">
                    <!-- 방문자 수 표시 -->
                    <div class="visitor-counter" id="visitor-counter">
                        <span class="visitor-label">Today</span>
                        <span class="visitor-count" id="visitor-count">-</span>
                    </div>
                    <div class="visitor-counter" id="visitor-counter-total">
                        <span class="visitor-label">Total</span>
                        <span class="visitor-count" id="visitor-total">-</span>
                    </div>
                    <div class="admin-user-info">
                        <span id="user-email"></span>
                        <button id="logout-button" class="logout-button">로그아웃</button>
                    </div>
                </div>
            </div>
        </header>

        <main class="admin-main">
            <div class="test-pages-grid">
                <!-- 누끼 서비스 -->
                <a href="/nukki" class="test-page-card">
                    <span>
                        <h2>웨딩드레스 누끼 서비스</h2>
                        <p>웨딩드레스를 입은 인물 이미지에서 드레스만 추출합니다</p>
                    </span>
                </a>

                <!-- 관리자 대시보드 -->
                <a href="/admin" class="test-page-card">
                    <span>
                        <h2>관리자 대시보드</h2>
                        <p>합성 로그 및 통계를 확인할 수 있는 관리자 페이지</p>
                    </span>
                </a>

                <!-- 문서용로그 -->
                <a href="/document-logs" class="test-page-card">
                    <span>
                        <h2>문서용로그</h2>
                        <p>합성 결과를 이미지로 확인할 수 있는 문서용 로그 페이지</p>
                    </span>
                </a>

                <!-- 드레스 관리 -->
                <a href="/admin/dress-manage" class="test-page-card">
                    <span>
                        <h2>드레스 관리</h2>
                        <p>드레스 정보 목록 조회 및 삭제</p>
                    </span>
                </a>

                <!-- 드레스 추가 -->
                <a href="/admin/dress-insert" class="test-page-card">
                    <span>
                        <h2>드레스 추가</h2>
                        <p>드레스 이미지를 업로드하고 데이터베이스에 추가</p>
                    </span>
                </a>

                <!-- 모델 비교 테스트 -->
                <a href="/model-comparison" class="test-page-card">
                    <span>
                        <h2>모델 비교 테스트</h2>
                        <p>여러 모델의 합성 기능을 동시에 비교하여 성능과 품질을 평가합니다</p>
                    </span>
                </a>

                <!-- 체형 분석 -->
                <a href="/body-analysis" class="test-page-card">
                    <span>
                        <h2>체형 분석</h2>
                        <p>전신 이미지를 업로드해 AI 체형 분석과 드레스 추천을 받아보세요</p>
                    </span>
                </a>

                <!-- 체형 생성 -->
                <a href="/body-generation" class="test-page-card">
                    <span>
                        <h2>체형 생성</h2>
                        <p>얼굴이 포함된 이미지에서 얼굴+목을 보존하고 전신 이미지를 생성합니다</p>
                    </span>
                </a>

                <!-- LLM 모델 테스트 -->
                <a href="/llm-model" class="test-page-card">
                    <span>
                        <h2>LLM 모델 테스트</h2>
                        <p>프롬프트 생성용과 이미지 생성용 LLM 모델을 선택하여 테스트합니다</p>
                    </span>
                </a>

                <!-- 이미지 필터 & 프레임 -->
                <a href="/image-filter-sticker" class="test-page-card">
                    <span>
                        <h2>이미지 필터 & 프레임</h2>
                        <p>이미지에 필터와 프레임을 적용하여 꾸며보세요</p>
                    </span>
                </a>

                <!-- 드레스 판별 테스트 -->
                <a href="/dress-batch-test" class="test-page-card">
                    <span>
                        <h2>드레스 판별 테스트</h2>
                        <p>여러 이미지를 배치로 업로드하여 드레스 여부를 판별합니다</p>
                    </span>
                </a>

                <!-- 포즈 랜드마크 시각화 -->
                <a href="/pose-landmark-visualizer" class="test-page-card">
                    <span>
                        <h2>포즈 랜드마크 시각화</h2>
                        <p>이미지를 업로드하면 MediaPipe Pose 랜드마크를 시각화하여 표시합니다</p>
                    </span>
                </a>
            </div>
        </main>
    </div>

    <script>
        // 서버에서 전달된 인증 상태를 전역 변수로 설정 (admin_login.js에서 사용)
        window.isAuthenticated = JSON.parse('{{ is_authenticated|default(false)|tojson }}');
        window.userEmail = JSON.parse('{{ user_email|default(None)|tojson }}');
    </script>
    <script src="/static/admin_login.js"></script>
</body>

</html>